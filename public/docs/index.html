<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Almacen Principal — Documentación</title>
  <link rel="stylesheet" href="https://unpkg.com/swagger-ui-dist@5/swagger-ui.css" />
  <style>
    body { margin: 0; background: #e5e7eb; }
    .topbar { display: none; }
    #swagger-ui { max-width: 1200px; margin: 0 auto; }
  </style>
</head>
  <body>
    <div style="max-width:1200px;margin:16px auto 0;padding:12px;background:#fff;border-radius:8px;border:1px solid #e5e7eb">
      <div style="display:flex;gap:12px;align-items:center;flex-wrap:wrap">
        <strong>Ruta rápida:</strong>
        <label>Status
          <select id="statusSel" style="padding:6px 8px;border:1px solid #cbd5e1;border-radius:6px">
            <option value="activo" selected>activo (default)</option>
            <option value="inactivo">inactivo</option>
            <option value="all">all</option>
          </select>
        </label>
        <code id="builtText" style="padding:4px 6px;background:#f8fafc;border:1px solid #e2e8f0;border-radius:6px">/api/hospitales</code>
        <button id="copyBtn" title="Copiar" style="padding:6px 10px;border:1px solid #cbd5e1;border-radius:6px;background:#f1f5f9;cursor:pointer">Copiar</button>
      </div>
      <div style="margin-top:8px;font-size:12px;color:#334155">Consejo: "activo" es el valor por defecto; si seleccionas "activo" no se añade query param.</div>
    </div>
    <div id="swagger-ui"></div>
    <script src="https://unpkg.com/swagger-ui-dist@5/swagger-ui-bundle.js" crossorigin></script>
    <script>
      const specUrl = './openapi.yaml?v=' + (new Date()).getTime();
      window.ui = SwaggerUIBundle({
        url: specUrl,
        dom_id: '#swagger-ui',
        deepLinking: true,
        presets: [SwaggerUIBundle.presets.apis],
        layout: 'BaseLayout'
      });

      // Helper para construir solo la ruta
      function updateLink() {
        const status = document.getElementById('statusSel').value;
        const path = status === 'activo' ? '/api/hospitales' : `/api/hospitales?status=${encodeURIComponent(status)}`;
        document.getElementById('builtText').textContent = path;
      }
      document.getElementById('statusSel').addEventListener('change', updateLink);
      document.getElementById('copyBtn').addEventListener('click', function(){
        const text = document.getElementById('builtText').textContent;
        navigator.clipboard.writeText(text).then(()=>{
          const btn = document.getElementById('copyBtn');
          const old = btn.textContent;
          btn.textContent = 'Copiado';
          setTimeout(()=> btn.textContent = old, 1200);
        });
      });
      updateLink();
    </script>
  </body>
</html>
